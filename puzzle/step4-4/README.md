# Step4-4: puzzle リファクタリング３

### 〜「Step4-4」 でやっていること〜

・盤面のシャッフル方法を改善<br>
　選択した「レベル」の二乗 × 250 回シャッフルしてたけれど、<br>
　「ランダムに『タイル』を選び、その上下左右に『隙間』があるれば、そこに移動する」という方法だった。<br>
　そのため、シャッフル回数の半分くらいしか実際にシャッフルできていなかった。<br><br>

　新しい方法は、主体を「隙間」に変更している。<br><br>

　　・その上下左右に「タイル」があるか？<br>
　　・その対象の「タイル」は、前回シャッフルするまえに「隙間」だった場所ではないか？<br><br>

　…という条件に該当する候補を選ぶ。<br>
　そして、そのなかから移動させる「タイル」をひとつ、ランダムに選ぶ、という方法にした。<br>
　これで毎回確実に「タイル」移動が行われる。<br><br>

※以下のファイル群は数が多いのでアップロードしてません。<br><br>

　　[ ~/node_modules/* ]<br>
　　[ ~/resource/public/js/compiled/* ]<br><br>
